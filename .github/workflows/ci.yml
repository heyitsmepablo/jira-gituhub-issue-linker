# .github/workflows/ci.yml
name: Testes Unitarios

on: [push, pull_request]

jobs:
  CI:
    runs-on: ubuntu-latest
    environment: Development
    steps:
      - name: Verificação do Repositorio
        uses: actions/checkout@v4.1.7

      - name: Verificação de Envs
        run: |
          echo "GH_TOKEN=${{ secrets.GH_TOKEN }}"
          echo "GH_ORG=${{ vars.GH_ORG }}"
          echo "GH_PROJECT_ID=${{ vars.GH_PROJECT_ID }}"
          echo "NODE_PORT=${{ vars.NODE_PORT }}"
        env:
          GH_TOKEN: ${{ secrets.GH_TOKEN }}
          GH_ORG: ${{ vars.GH_ORG }}
          GH_PROJECT_ID: ${{ vars.GH_PROJECT_ID }}
          NODE_PORT: ${{ vars.NODE_PORT }}

      - name: Configurando Node.Js
        uses: actions/setup-node@v4.0.3
        with:
          node-version: '20'

      - name: Instalando Dependencias
        run: npm install
        
      - name: Executando Testes
        run: npm run test -- --project=material-ui --watch=false --no-progress --browsers=ChromeHeadless
        env:
          GH_TOKEN: ${{ secrets.GH_TOKEN }}
          GH_ORG: ${{ vars.GH_ORG }}
          GH_PROJECT_ID: ${{ vars.GH_PROJECT_ID }}
          NODE_PORT: ${{ vars.NODE_PORT }}

